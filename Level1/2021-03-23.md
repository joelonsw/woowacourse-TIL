### 2021-03-23

## 엘레강트 오브젝트 수업 with 포비
- __DI 위키피디아__
    - 참고: https://ko.wikipedia.org/wiki/%EC%9D%98%EC%A1%B4%EC%84%B1_%EC%A3%BC%EC%9E%85
    - 정의
        - 하나의 객체가 다른 객체의 의존성을 제공하는 테크닉
            - "의존성": 서비스로 사용할 수 있는 객체
            - 클라이언트에게 무슨 서비스를 사용할 것인지를 말하주는 것
            - 서비스는 클라이언트 상태의 일부
                - 서비스 구축/찾기 대신 서비스를 전달하는 것!
        - 클라이언트가 주입자와 서비스 구성 방식, 현재 사용중인 서비스에 알 필요가 없어!
            - 클라이언트는 서비스의 인터페이스만 알면 됨
        - "구성"의 책임을 가진 서비스와 "사용"의 책임을 가진 클라이언트를 분리하는 것!
    - 의도
        - 객체를 필요로 하는 클래스 내에 직접 객체 생성하는 것 == 클래스를 특정 객체에 커밋하는 것  
            == 클래스로 부터 독립적으로 인스턴스의 생성을 변경하는 것이 불가능
            == 유연하지 않음
    - 특징
        - 결합도를 느슨하게 만든다
        - 의존관계 역전 원칙 (Dependency Inversion Principle), 단일 책임 원칙 (Single Responsibility Principle) 따르도록 함
    
- __DI__
    - tightly coupling: test 하기 힘든 구조
        - tightly coupling이란?
            - 각각의 컴포넌트가 서로를 사용하기 위해 상세히 아는 것
    - 유연한 코드를 작성해야한다!
        - 하지만 이게 초보자 입장에선 어렵단 말이지?
        - 그러면 테스트 가능한 코드를 만들어 보는 연습을 하자
    - 생성자 DI vs 메서드 파라미터 DI
        - 생성자 DI: 객체에 전달할 인자가 많다면, 생성자로 전달하는게 유리하다
        - 메서드 DI: 장) API 명세가 명확해질 수 있음 단) 매번 전달해줘야 함

- __엘레강트 오브젝트 책에서의 추천__
    1. 5개 이하의 public 메서드를 만들자
        - 유지보수에 좋은 객체는 작은 객체
        - Error 탐지에도 용이
        - SRP 준수도 용이
    2. 불변 객체로 만들자
        - Side Effect를 안 만든다
        - 다만... 
            - 상태가 변할때마다 새로운 인스턴스를 생성하니 성능이 저하됨
            - 따라서 캐싱을 고려해보자
            - 성능이 그래도 망하면 그땐 가변을 고려해보자
                - 참고로 백엔드 서버에서 발생하는 성능 저하는, 자바 어플리케이션에서의 성능 저하보다 외부 NW API 호출에서 올 가능성이 높다
    3. public 상수 구현 하지 말자!
        - 대신 상수를 클래스로 만들자
        - enum도 이런 면에서는 지양해야한다 (그저 상수의 모음이라는 것이 객체로써의 의미를 안 가져서 그런 것 아닐까?)
            - 로직이 가득한 enum은 어떨까?
    4. 인스턴스 필드의 수는 4개 이하로 유지할 것!

- __질문__
    - 그냥 추상클래스 vs Interface를 구현한 추상클래스
    - 결합도가 느슨한게 뭔데?
        - 각각의 구성요소(클래스/인터페이스/데이터/서비스)가 서로에 대해 아주 적거나 아예 모르는 상태로 서로를 사용하는 것
    - Side Effect가 뭔데?
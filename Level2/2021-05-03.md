### 2021-05-03

## 인프라 2단계
- __Application Log__
    - 애플리케이션의 상태를 로그로 남기자
    - 무엇을 로그로 남겨야 하는가?
    - 로그를 어찌 관리해야 하는가?

- __로그란?__
    - 컴퓨터 등에 접속한 기록 등이 컴퓨터 내에 남아 있는 것
        - 네트워크 접속 시 IP 주소나 접속한 OS 등이 서버 컴퓨터에 남음
    - OS나 다른 SW가 실행중에 발생하는 이벤트나 각기 다른 사용자의 통신 SW간의 메시지 기록한 파일
        
- __로깅 공식문서__
    - *참고: https://docs.spring.io/spring-boot/docs/2.2.7.RELEASE/reference/html/spring-boot-features.html#boot-features-logging*
    - 스프링 부트는 Commons Logging을 통해 내부 로깅을 진행
    - 기본적으로는 Logback, 기타 Commons Logging, Log4J, SLF4J 등이 사용가능
    - 로그 포맷
        > 2019-03-05 10:57:51.112  INFO 45469 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/7.0.52  
          2019-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext  
          2019-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1358 ms  
          2019-03-05 10:57:51.698  INFO 45469 --- [ost-startStop-1] o.s.b.c.e.ServletRegistrationBean        : Mapping servlet: 'dispatcherServlet' to [/]  
          2019-03-05 10:57:51.702  INFO 45469 --- [ost-startStop-1] o.s.b.c.embedded.FilterRegistrationBean  : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]  
        - 시간&날짜 -- Log 레벨: ERROR/WARN/INFO/DEBUG/TRACE -- 프로세스 ID -- [쓰레드 이름] -- 로거 이름 -- 로그 메시지
        
- __로깅 전략__
    - *참고: https://meetup.toast.com/posts/149*
    - spring-boot에서는 Logback을 확장하여 편리한 logging 설정을 할 수 있다
    - Logger 등록과 Level 설정
        - spring-boot에서는 application.yml의 설정만으로 logger와 level을 지정할 수 있음
        - application.yml에 정의한 properties로도 logging이 동작하도록 지원
        ``` 
        logging:  
            level:  
                root: warn  
                com.parfait.study.simplelogging.service.SomeService: info  
        ```

- __cAdvisor__
    - 컨테이너의 리소스 사용과 퍼포먼스 현황을 알려줌
        - 데몬으로 컨테이너 정보를 수집/집계/처리 함
    - 각 컨테이너에 대해 리소스 분리, 리소스 사용량, 리소스 사용 히스토 그램을 유지

- __CloudWatch__
    - 클라우드 와치는 AWS에서 동작하는 애플리케이션의 상태를 모니터링하는 도구
        - 애플리케이션: EC2, RDS, ElasticCache 등
        - 모니터링: 머신의 CPU 점유율, 남은 메모리의 용량 등


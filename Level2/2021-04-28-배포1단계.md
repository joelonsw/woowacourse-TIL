### 2021-04-28

## 접근 통제
- __Bastion__
    - 보안 설정을 구성할 때 모든 서버에 동일 수준 보안 설정은 X
        - 관리 포인트 투 머치
    - 22번 포트로 우리가 AWS 인스턴스에 접근하자나?
        - 22번 포트 보안이 뚫리면 ㄹㅇ 큰일 남
    - Bastion Server만 두고, 악성 루트킷, 랜섬웨어 등으로 피해봐도 Bastion Server 만 재구성하면 됨
        - 서비스에 영향 최소화
    - 서비스 정상 트래픽과 관리자용 트래픽 구분
        - DDoS 공격으로 대역폭 차지하고 있다면, 일반적인 서비스용 서버에 접속 불가능
        - 이때 바스티온 경로로 접근할 수 있음
    - 22번 Port 접속을 Bastion 서버에 오픈하고, 그 서버에 보안을 집중하자
    ```shell script
    ubuntu@ip-192-168-0-119:~$ ssh-keygen -t rsa //키 생성
    ubuntu@ip-192-168-0-119:~$ cat ~/.ssh/id_rsa.pub //키 조회
    ssh-rsa VWd/RzRH4JZsErvNGQJrIEGdgO05o29hR1Ox ubuntu@ip-192-168-0-119
    ```
    - Bastion Server는 자신의 IP에서만 22번 포트로 접근 가능하도록 설정
    - 서비스용 서버에 22번 포트로 접근하는 것은 Bastion에서만 가능하도록 설정
    - 나 --Port22--> Bastion --Port22--> Service
    - 음 그니까, 서비스를 제어하는 우분투 서버에 접근하는 방법은 22번 포트를 통한 ssh 연결인데, 
        - 이말은 곧 22번 포트가 뚫리면 서비스의 모든 제어가 뚫린다는 것이지
        - 그러면 서비스의 22번 포트를 베스쳔 서버에게만 열어주자. 베스쳔에서만 22번으로 진입가능토록
        - 베스쳔의 22번 포트는 나의 IP에서만 접근이 가능토록 하자
    - 그러면 결국 내 컴퓨터, 베스쳔 컴퓨터까지 털려야 서비스 컴퓨터 제어가능하네 굿
    
- __실습 질문__
    - sudo apt-get update?
        - OS에서 사용 가능한 패키지들과 그 버전들의 리스트를 업데이트 하는 명령어
            - 설치되어 있는 패키지를 최신으로 업데이트 X
            - 설치 가능한 리스트를 업데이트 O
    - EC2란?
        - 쉽게 생각해서 한 대의 컴퓨터를 임대해 주는 것
        - 선호하는 OS/웹서버/DB 설치 뚝딱
        - *참고: https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/concepts.html*
        - AWS 클라우드에서 확장 가능 컴퓨팅 용량 제공
            - HW에 선투자할 필요 없어 빠르게 애플리케이션 개발/배포 가능
            - 원하는 만큼 가상 서버 구축하고, 보안 및 네트워크 구성과 스토리지 관리 가능
            - 손쉽게 트래픽에 대응할 수 있음 (필요하면 더 만들어!)
    
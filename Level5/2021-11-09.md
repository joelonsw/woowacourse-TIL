### 2021-11-09

## JPA 순환 참조
- *참고: https://velog.io/@chjh121/JPA-%EC%88%9C%ED%99%98-%EC%B0%B8%EC%A1%B0*
- **문제 상황**
    - 엔티티의 양방향 매핑이 되어있는 상황
    - 해당 엔티티를 직렬화하는 과정에서 무한 참조 발생
    ```java
    @Entity
    public class User {
    
        @Id
        @GeneratedValue(strategy = GenerationType.IDENTITY)
        private Long id;
    
        private String name;
    
        private String email;
    
        private String password;
    
        @OneToMany(fetch = FetchType.LAZY, mappedBy = "user")
        private List<Post> postList;
    }
    
    @Entity
    public class Post {
    
        @Id
        @GeneratedValue(strategy = GenerationType.IDENTITY)
        private Long id;
    
        private String title;
    
        private String content;
    
        private String writer;
    
        @ManyToOne(fetch = FetchType.LAZY)
        private User user;
    }
    ```

- **직렬화 과정**
    - Jackson에서 객체를 직렬화할 때 문제가 발생함!
    1. 요청한 Post 객체 직렬화
    2. Post Entity내의 User를 직렬화
    3. User Entity내의 `List<Post>`를 직렬화

- **해결 방법**
    - `@JsonIgnore` : 해당 필드를 직렬화 대상에서 제거
    - User에 `@JsonManagedReference`를, Post에 `@JsonBackReference`를 추가해주기
    - DTO를 사용하기 <= 추천

## Easy Deploy 로그인 복습하기 (Session)

## Network nolto.app 연결과정
1. 어플리케이션 레이어: HTTP Request 작성
2. 트랜스포트 레이어: SP(start-port) - DP(dest-port) 지정
3. 인터넷 레이어: SA(start-ip) - DA(dest-ip) 지정
    - DNS는 UDP로 통신
4. 이더넷
    - 이제 MAC 주소로 보내자 (실제 찐으로 모뎀에 물리적으로 할당된 이름)
    - 넓은 세상으로 나가자!
    - ARP 프로토콜을 사용하여 IP주소를 MAC주소로 변환    
        - 다음 라우터까지의 맥주소!
        - iptable 맥주소와 ip를 매핑해둠

## HTTP Request는 어떻게 세상에 전달되어 서버에게 전달되는가?

## DNS는 어떻게 동작하는가?

## 놀토의 깃 브랜치 전략

## 놀토 인프라
1. Why replication?
2. Why load-balancing?

## 놀토 JPA
1. Persist + All로도 안사라짐
2. N+1
    - fetch
    - batchSize
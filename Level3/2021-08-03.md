### 2021-08-03

## EventListener

## Transaction 전파 레벨

## `@TransactionalEventListener`

## BaseEntity
- *참고1: https://eocoding.tistory.com/60*
- *참고2: https://ict-nroo.tistory.com/129*
- *참고3: https://velog.io/@aidenshin/%EC%97%94%ED%8B%B0%ED%8B%B0-%EC%9E%91%EC%84%B1-JPA-Auddit-%EC%A0%81%EC%9A%A9*
- `@MappedSuperclass`: 객체의 입장에서 공통 매핑 정보가 필요한 경우
    - 반복되는 id, name
    - 부모 클래스에만 선언하고 속성만 상속받아 사용하자
        - DB는 다 컬럼 따로따로 알아서 잘 되어있어. 객체로써 안 써둘 뿐이야
- Auddit(감사) 
    - 거의 모든 엔티티에 들어가는 필드들
    - 다음과 같이 Spring Audit 기능을 쓸라면 main 클래스에 `@EnableJpaAuditing`을 추가하자
    ```java
    @EnableJpaAuditing
    @SpringBootApplication
    public class NoltoApplication {
        public static void main(String[] args) {
            SpringApplication.run(NoltoApplication.class, args);
        }
    }
    ```
- 직접 생성해서 사용할 일 없으니 **추상 클래스**로 만들자
```java
@MappedSuperclass //BaseEntity 상속한 엔티티들은 BaseEntity에 있는 멤버변수를 컬럼으로 인식
@Getter
@EntityListeners(AuditingEntityListener.class) //Auditing 기능을 사용한다. (자동으로 값을 매핑 시키겠다)
public abstract class BaseEntity {

    @CreatedDate
    @Column(nullable = false)
    private LocalDateTime createdDate;

    @LastModifiedDate
    private LocalDateTime modifiedDate;

}
```

## 자기참조 테이블

## N+1 문제

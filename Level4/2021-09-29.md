### 2021-09-29

## Binlog
- *참고: https://byedong.tistory.com/10*
- **binlog 썰**
    - 원래 binlog는 replication을 위함 but 복구용도로도 매우 훌륭!
    - /etc/my.cnf에 log-bin 주석처리 되어있지 않다면, mysql은 기본적으로... 
        - /usr/local/mysql/data 디렉토리에
            - Host명-bin.000001
            - Host명-bin.000002
            - Host명-bin.000003... 등을 생성
                - mysql 재시작할 때 마다 늘어나는 숫자!
    - binlog에는...
        - DDL (Create, Alter, Drop), DML (Insert, Update, Delete) 등이 기록
    - binlog는 바이너리라서 변환 좀 해야 읽을 수 있음
        - `/usr/local/mysql/data/Host명-bin.0000001 >> 1.sql`
    - 이렇게 백업 받은 파일에서 1.sql의 50000번쨰 SQL 문이 장애를 일으킨놈이라면 이걸 주석처리하자

## Crontab
- *참고 1: https://jdm.kr/blog/2*
- *참고 2: https://xrabcde.github.io/db-backup-auto/*
- **Crontab 기본**
    - 윈도우의 스케줄러와 비슷
    - "특정 시간에 특정 작업을 실행한다!"
    - `$ crontab -e`
        - 크론탭 설정할 수 있는 장소
        - 각종 크론탭 명령 입력해두자
    - `$ crontab -l`
        - cat 명령어로 파일 읽어들인 것처럼 표준 출력으로 크론탭 내용
    - `$ crontab -r`
        - 크론탭 삭제
    - 한 번 입력해볼까?
        1. `$ crontab -e`
        2. `* * * * * ls -al`
        3. `:wq`

- **주기 설정**
    ```
    *　　　　　　*　　　　　　*　　　　　　*　　　　　　*
    분(0-59)　　시간(0-23)　일(1-31)　　월(1-12)　  요일(0-7)
    ```
    - 숫자 범위로 입력하거나 * 로 입력하거나!
    - 예시들
        - `* * * * * /home/script/test.sh` : 매분 test.sh 실행
        - `45 5 * * 5 /home/script/test.sh` : 매주 금요일 오전 5시 45분에 test.sh 실행
        - `0,20,40 * * * * /home/script/test.sh` : 매일 매시간 0분, 20분, 40분에 test.sh 실행
        - `0-30 1 * * * /home/script/test.sh` : 매일 1시 0분 ~ 30분 까지 매 분 test.sh 실행
        - `*/10 * * * * /home/script/test.sh` : 매 10분마다 test.sh 실행
        - `*/10  2,3,4 5-6 * * /home/script/test.sh` : 5일에서 6일까지 2,3,4시에 매 10분마다 tesh.sh 실행
    - 기호들
        - `*`: 매번
        - `-`: 부터 어디까지
        - `/`: 마다